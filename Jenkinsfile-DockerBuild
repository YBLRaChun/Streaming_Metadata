pipeline {
    agent any
    stages {
        stage('Docker Build') {
            steps {
                script {
                    // Build and run the Docker container
                    env.imageName = 'doc_server_test'
                    env.imageTag = 'latest'
                    docker.build("${env.imageName}:${env.imageTag}")

                    // docker.build('doc_server_test:tatsu_server_test')
                }

            }
        }
        stage('Run Docker Container') {
            steps {
                script {
                    // Define the container name
                    def containerName = 'AI_PLATFROM'
                    def dockerContainer =  docker.image("${env.imageName}").run("--name AI_PLATFROM")

                    // Run additional commands inside the Docker container if needed
                    dockerContainer.inside {
                        // You can run commands inside the Docker container
                        sh 'echo "This is a Docker container running in Jenkins"'
                    }

                    dockerContainer.stop()
                    dockerContainer.remove(force: true)
                                        // docker.image("doc_server_test").run()
                }
            }
        }
    }
}